<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <base href="https://tomokana225.github.io/piano-request-checker/" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Piano Request Checker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kiwi+Maru:wght@300;400;500&family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <style>
      body {
        font-family: 'Noto Sans JP', sans-serif;
      }
      h1, h2, h3, h4, h5, h6 {
        font-family: 'Kiwi Maru', serif;
      }
    </style>
    <script type="importmap">
      {
        "imports": {
          "@google/genai": "https://aistudiocdn.com/@google/genai@^1.28.0",
          "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
          "react": "https://aistudiocdn.com/react@^19.2.0",
          "react/": "https://aistudiocdn.com/react@^19.2.0/"
        }
      }
    </script>
  <link rel="stylesheet" href="/index.css">
</head>
  <body>
    <div id="root"></div>
    <script type="text/babel" data-presets="react,typescript" data-type="module">
      import React, { useState, useCallback } from 'react';
      import ReactDOM from 'react-dom/client';

      // All application code is now consolidated into this single script tag
      // to avoid cross-origin/MIME type errors on GitHub Pages.

      // --- FROM types.ts ---
      const YamahaCheckResult = {
        Available: 'Available',
        NotAvailable: 'NotAvailable',
        Unknown: 'Unknown',
      };

      // --- FROM components/IconComponents.tsx ---
      const SearchIcon = ({ className }) => (
        <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
        </svg>
      );
      const MusicNoteIcon = ({ className }) => (
        <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-13c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2z" />
        </svg>
      );
      const CheckCircleIcon = ({ className }) => (
          <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
      );
      const XCircleIcon = ({ className }) => (
          <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
      );
      const QuestionMarkCircleIcon = ({ className }) => (
          <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
      );
      const CogIcon = ({ className }) => (
          <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
          </svg>
      );
      const XIcon = ({ className }) => (
        <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
        </svg>
      );
      const ExternalLinkIcon = ({ className }) => (
        <svg className={className} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
        </svg>
      );

      // --- FROM constants.ts ---
      const PLAYABLE_SONGS_EXAMPLE = [
        { title: "夜に駆ける", artist: "YOASOBI" }, { title: "Pretender", artist: "Official髭男dism" },
        { title: "Lemon", artist: "米津玄師" }, { title: "紅蓮華", artist: "LiSA" },
        { title: "ドライフラワー", artist: "優里" }, { title: "白日", artist: "King Gnu" },
        { title: "マリーゴールド", artist: "あいみょん" }, { title: "猫", artist: "DISH//" },
        { title: "うっせぇわ", artist: "Ado" }, { title: "廻廻奇譚", artist: "Eve" },
        { title: "炎", artist: "LiSA" }, { title: "Cry Baby", artist: "Official髭男dism" },
        { title: "アイドル", artist: "YOASOBI" }, { title: "KICK BACK", artist: "米津玄師" },
        { title: "新時代", artist: "Ado" }, { title: "旅路", artist: "藤井風" },
        { title: "何なんw", artist: "藤井風" }, { title: "grace", artist: "藤井風" },
        { title: "きらり", artist: "藤井風" },
      ];

      // --- FROM services/geminiService.ts ---
      const WORKER_URL = 'https://piano-request-proxy.tomoyaking0225.workers.dev';
      const parseGeminiResponse = (rawText, sources) => {
          const lines = rawText.trim().split('\n');
          let result = YamahaCheckResult.Unknown;
          let details = rawText;

          if (lines.length > 0) {
              const firstLine = lines[0];
              if (firstLine.includes('【対象】')) {
                  result = YamahaCheckResult.Available;
                  details = lines.slice(1).join('\n').trim();
              } else if (firstLine.includes('【対象外】')) {
                  result = YamahaCheckResult.NotAvailable;
                  details = lines.slice(1).join('\n').trim();
              } else if (firstLine.includes('【不明】')) {
                  result = YamahaCheckResult.Unknown;
                  details = lines.slice(1).join('\n').trim();
              }
          }
          return { result, details, sources };
      };
      const checkPrintGakufu = async (query) => {
        if (!WORKER_URL || WORKER_URL.includes('your-worker-name')) {
            console.error("Cloudflare Worker URL is not configured.");
            throw new Error("バックエンドが設定されていません。services/geminiService.ts の WORKER_URL を設定してください。");
        }
        try {
          const response = await fetch(WORKER_URL, {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ query }),
          });
          if (!response.ok) {
              const errorData = await response.text();
              console.error("Error from worker:", errorData);
              throw new Error(`サーバーからの応答エラー: ${response.status}`);
          }
          const data = await response.json();
          return parseGeminiResponse(data.text, data.sources || []);
        } catch (error) {
          console.error("Error calling worker or parsing response:", error);
          const errorMessage = error instanceof Error ? error.message : JSON.stringify(error);
          if (errorMessage.includes('429') || errorMessage.includes('RESOURCE_EXHAUSTED')) {
              throw new Error("APIのリクエストが上限に達しました。時間をおいてから再度お試しください。");
          }
          throw new Error("バックエンドとの通信または応答の解析中にエラーが発生しました。");
        }
      };

      // --- FROM components/LoadingSpinner.tsx ---
      const LoadingSpinner = () => {
        return (
          <div className="flex justify-center items-center p-4">
            <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-pink-400"></div>
          </div>
        );
      };

      // --- FROM components/SearchBar.tsx ---
      const SearchBar = ({ searchTerm, setSearchTerm, handleSearch, isLoading }) => {
        const handleKeyDown = (event) => {
          if (event.key === 'Enter') {
            handleSearch();
          }
        };
        return (
          <div className="relative w-full max-w-xl mx-auto">
            <input
              type="text" value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)}
              onKeyDown={handleKeyDown} placeholder="曲名やアーティスト名で検索..." disabled={isLoading}
              className="w-full pl-5 pr-28 py-4 text-lg bg-gray-700/50 border border-gray-600 rounded-full text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-pink-500 transition-all duration-300 shadow-lg"
            />
            <button
              onClick={handleSearch} disabled={isLoading}
              className="absolute inset-y-0 right-2 my-2 flex items-center px-6 bg-pink-600 text-white rounded-full hover:bg-pink-700 disabled:bg-gray-500 disabled:cursor-not-allowed transition-colors duration-300"
            >
              <SearchIcon className="h-6 w-6 mr-2" />
              <span className="font-bold">検索</span>
            </button>
          </div>
        );
      };

      // --- FROM components/ResultsDisplay.tsx ---
      const PlayableListCard = ({ results }) => {
          return (
               <div className="bg-gray-800/50 backdrop-blur-sm border border-cyan-400/50 rounded-2xl p-6 transition-all duration-300 shadow-lg flex flex-col w-full">
                  <div className="flex justify-between items-center mb-4">
                      <h3 className="text-xl font-bold text-gray-200">弾ける曲リスト 検索結果</h3>
                  </div>
                  <div className="flex-grow min-h-[200px]">
                      {results.length > 0 ? (
                          <ul className="space-y-3">
                              {results.map((song, index) => (
                                  <li key={index} className="flex items-center text-white animate-fade-in">
                                      <MusicNoteIcon className="h-5 w-5 mr-3 text-cyan-400" />
                                      <span><strong>{song.title}</strong> - {song.artist}</span>
                                  </li>
                              ))}
                          </ul>
                      ) : (
                          <div className="flex items-center space-x-4 h-full justify-center">
                              <XCircleIcon className="h-8 w-8 text-gray-500" />
                              <div>
                                  <p className="text-lg font-semibold text-white">見つかりませんでした</p>
                                  <p className="text-gray-400">リスト内に見つかりません。</p>
                              </div>
                          </div>
                      )}
                  </div>
              </div>
          );
      };
      const YamahaCard = ({ isLoading, error, response, searchTerm }) => {
          const renderContent = () => {
              if (isLoading) {
                  return (
                      <div className="text-center">
                          <LoadingSpinner />
                          <p className="text-pink-300 mt-2">AIがヤマハ「プリント楽譜」を検索中...</p>
                      </div>
                  );
              }
              if (error) {
                  return (
                      <div className="flex items-center space-x-4 h-full justify-center text-red-300">
                          <XCircleIcon className="h-8 w-8" />
                          <div>
                              <p className="text-lg font-semibold">エラーが発生しました</p>
                              <p className="text-sm">{error}</p>
                          </div>
                      </div>
                  );
              }
              if (!response) {
                   const searchUrl = `https://www.print-gakufu.com/search/result/score___keyword__${encodeURIComponent(searchTerm)}___subscription/`;
                   return (
                      <div className="text-center">
                          <p className="text-gray-400 mb-6">
                              AIが「<span className="font-bold text-pink-300">{searchTerm}</span>」の楽譜を探します。<br/>(アプリ見放題プラン対象)
                          </p>
                          <a href={searchUrl} target="_blank" rel="noopener noreferrer" className="inline-flex items-center gap-3 px-8 py-3 bg-pink-600 text-white font-bold rounded-full hover:bg-pink-700 transition-all duration-300 transform hover:scale-105">
                              <ExternalLinkIcon className="h-5 w-5" />
                              <span>公式サイトで直接探す</span>
                          </a>
                      </div>
                   )
              }
              const { result, details, sources } = response;
              let icon, title, titleColor;
              switch(result) {
                  case YamahaCheckResult.Available:
                      icon = <CheckCircleIcon className="h-10 w-10 text-green-400" />;
                      title = "【対象】見つかりました";
                      titleColor = "text-green-400";
                      break;
                  case YamahaCheckResult.NotAvailable:
                      icon = <XCircleIcon className="h-10 w-10 text-red-400" />;
                      title = "【対象外】見つかりませんでした";
                      titleColor = "text-red-400";
                      break;
                  default:
                      icon = <QuestionMarkCircleIcon className="h-10 w-10 text-yellow-400" />;
                      title = "【不明】特定できませんでした";
                      titleColor = "text-yellow-400";
              }
              const summary = details.split('♫')[0].trim();
              const songList = details.includes('♫') ? details.substring(details.indexOf('♫')).split('\n').filter(s => s.trim()) : [];
              return (
                  <div className="text-left w-full animate-fade-in">
                      <div className="flex items-center gap-4 mb-4">
                          {icon}
                          <h4 className={`text-2xl font-bold ${titleColor}`}>{title}</h4>
                      </div>
                      <p className="text-gray-300 mb-4 whitespace-pre-wrap">{summary}</p>
                      {songList.length > 0 && (
                          <div className="mb-4">
                              <h5 className="font-bold text-gray-200 mb-2">関連曲リスト:</h5>
                              <ul className="space-y-1 pl-2">
                                  {songList.map((song, i) => (
                                      <li key={i} className="text-sm text-pink-300">{song}</li>
                                  ))}
                              </ul>
                          </div>
                      )}
                      {sources && sources.length > 0 && (
                           <div>
                              <h5 className="font-bold text-gray-200 mb-2">参照元:</h5>
                              <ul className="space-y-1">
                                  {sources.map((source, i) => (
                                      <li key={i} className="text-sm">
                                          <a href={source.web?.uri} target="_blank" rel="noopener noreferrer" className="flex items-center gap-1 text-cyan-400 hover:underline">
                                              <ExternalLinkIcon className="h-4 w-4" />
                                              <span className="truncate">{source.web?.title}</span>
                                          </a>
                                      </li>
                                  ))}
                              </ul>
                          </div>
                      )}
                  </div>
              );
          };
          return (
              <div className="bg-gray-800/50 backdrop-blur-sm border border-pink-400/50 rounded-2xl p-6 transition-all duration-300 shadow-lg flex flex-col w-full">
                  <div className="flex justify-between items-center mb-4">
                      <h3 className="text-xl font-bold text-gray-200">ヤマハ「プリント楽譜」検索</h3>
                  </div>
                  <div className="flex-grow min-h-[200px] flex flex-col justify-center items-center">
                      {renderContent()}
                  </div>
              </div>
          );
      };
      const ResultsDisplay = ({ error, playableListResult, hasSearched, searchTerm, isYamahaLoading, yamahaApiError, yamahaApiResponse }) => {
        if (!hasSearched) {
          return (
            <div className="text-center p-8 mt-8 bg-gray-800/30 rounded-2xl">
              <h2 className="text-2xl font-bold text-white">弾ける曲を検索しよう！</h2>
              <p className="text-gray-400 mt-2">上の検索ボックスに曲名やアーティスト名を入力して、リスト内と「ぷりんと楽譜」を同時に検索します。</p>
            </div>
          );
        }
        if (error) {
          return <div className="text-center p-8 mt-8 bg-red-900/50 rounded-2xl text-red-300">{error}</div>;
        }
        return (
          <div className="mt-8 grid grid-cols-1 md:grid-cols-2 gap-8 w-full max-w-5xl animate-fade-in">
              <PlayableListCard results={playableListResult} />
              <YamahaCard isLoading={isYamahaLoading} error={yamahaApiError} response={yamahaApiResponse} searchTerm={searchTerm} />
          </div>
        );
      };

      // --- FROM components/SettingsModal.tsx ---
      const SettingsModal = ({ isOpen, onClose, listInput, setListInput, isLoggedIn, onLogin, onLogout, }) => {
        const [password, setPassword] = useState('');
        const [loginError, setLoginError] = useState(false);
        if (!isOpen) {
          return null;
        }
        const handleLoginClick = () => {
          if (onLogin(password)) {
            setLoginError(false);
            setPassword('');
          } else {
            setLoginError(true);
          }
        };
        const handleLogoutClick = () => {
          onLogout();
          onClose();
        };
        return (
          <div className="fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex justify-center items-center p-4" onClick={onClose} aria-modal="true" role="dialog">
            <div className="relative bg-gray-800 border border-cyan-400/50 rounded-2xl p-6 w-full max-w-lg shadow-2xl animate-fade-in" onClick={e => e.stopPropagation()}>
              <div className="flex justify-between items-center mb-4">
                <div className="flex items-center space-x-3">
                  <CogIcon className="h-6 w-6 text-cyan-300"/>
                  <h2 className="text-xl font-bold text-white">設定</h2>
                </div>
                <button onClick={onClose} className="text-gray-400 hover:text-white transition-colors">
                  <XIcon className="h-6 w-6" />
                </button>
              </div>
              {isLoggedIn ? (
                <div>
                  <p className="text-sm text-gray-400 mb-2">弾ける曲リストを編集 (形式: 曲名,アーティスト名)</p>
                  <textarea
                    value={listInput} onChange={(e) => setListInput(e.target.value)}
                    placeholder="例:&#10;夜に駆ける,YOASOBI&#10;Pretender,Official髭男dism"
                    className="w-full h-48 bg-gray-900/70 border border-gray-600 rounded-lg p-3 text-sm text-gray-200 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cyan-500 transition-colors duration-300 mb-4"
                  />
                  <div className="flex justify-end gap-3">
                       <button onClick={handleLogoutClick} className="px-5 py-2 bg-red-600 text-white font-bold rounded-lg hover:bg-red-700 transition-colors">ログアウト</button>
                       <button onClick={onClose} className="px-5 py-2 bg-cyan-600 text-white font-bold rounded-lg hover:bg-cyan-700 transition-colors">保存して閉じる</button>
                  </div>
                </div>
              ) : (
                <div>
                   <p className="text-sm text-gray-400 mb-4">管理者としてログインすると、弾ける曲リストを編集できます。</p>
                  <div className="flex items-center gap-3">
                    <input
                      type="password" value={password}
                      onChange={(e) => { setPassword(e.target.value); setLoginError(false); }}
                      onKeyDown={(e) => e.key === 'Enter' && handleLoginClick()}
                      placeholder="パスワード"
                      className={`flex-grow bg-gray-900/70 border ${loginError ? 'border-red-500' : 'border-gray-600'} rounded-lg px-4 py-2 text-gray-200 focus:outline-none focus:ring-2 focus:ring-cyan-500`}
                    />
                    <button onClick={handleLoginClick} className="px-5 py-2 bg-cyan-600 text-white font-bold rounded-lg hover:bg-cyan-700">
                      ログイン
                    </button>
                  </div>
                  {loginError && <p className="text-red-400 text-sm mt-2">パスワードが違います。</p>}
                </div>
              )}
            </div>
          </div>
        );
      };

      // --- FROM App.tsx ---
      const App = () => {
        const [searchTerm, setSearchTerm] = useState('');
        const [submittedSearchTerm, setSubmittedSearchTerm] = useState('');
        const [playableListInput, setPlayableListInput] = useState(PLAYABLE_SONGS_EXAMPLE.map(s => `${s.title},${s.artist}`).join('\n'));
        const [playableListResult, setPlayableListResult] = useState([]);
        const [error, setError] = useState(null);
        const [hasSearched, setHasSearched] = useState(false);
        const [isLoggedIn, setIsLoggedIn] = useState(false);
        const [isSettingsOpen, setIsSettingsOpen] = useState(false);
        const [isYamahaLoading, setIsYamahaLoading] = useState(false);
        const [yamahaApiError, setYamahaApiError] = useState(null);
        const [yamahaApiResponse, setYamahaApiResponse] = useState(null);

        const handleLogin = (password) => {
          if (password === 'admin123') {
              setIsLoggedIn(true);
              return true;
          }
          return false;
        }
        const handleLogout = () => { setIsLoggedIn(false); }
        
        const executeSearch = useCallback(async (term) => {
          const trimmedTerm = term.trim();
          if (!trimmedTerm) {
              setError("検索キーワードを入力してください。");
              setHasSearched(true);
              setPlayableListResult([]);
              setSubmittedSearchTerm('');
              setYamahaApiResponse(null);
              setYamahaApiError(null);
              return;
          }
          setError(null);
          setHasSearched(true);
          setSubmittedSearchTerm(trimmedTerm);
          setYamahaApiResponse(null);
          setYamahaApiError(null);

          const lowercasedTerm = trimmedTerm.toLowerCase();
          const lines = playableListInput.split('\n');
          const songsFromInput = lines.map(line => {
            const parts = line.split(/[,、]/);
            if (parts.length >= 2) {
              return { title: parts[0].trim(), artist: parts[1].trim() };
            }
            return null;
          }).filter(song => song !== null && (song.title !== '' || song.artist !== ''));
          
          const filteredSongs = songsFromInput.filter(
            (song) => song.title.toLowerCase().includes(lowercasedTerm) || song.artist.toLowerCase().includes(lowercasedTerm)
          );
          setPlayableListResult(filteredSongs);
          
          setIsYamahaLoading(true);
          try {
              const result = await checkPrintGakufu(trimmedTerm);
              setYamahaApiResponse(result);
          } catch (e) {
              setYamahaApiError(e instanceof Error ? e.message : '不明なエラーが発生しました。');
          } finally {
              setIsYamahaLoading(false);
          }
        }, [playableListInput]);

        const handleSearch = useCallback(async () => {
          const trimmedSearchTerm = searchTerm.trim();
          if (trimmedSearchTerm === '管理.passkey') {
            setIsSettingsOpen(true);
            setSearchTerm('');
            return;
          }
          await executeSearch(trimmedSearchTerm);
        }, [searchTerm, executeSearch]);
        
        return (
          <div className="min-h-screen bg-gray-900 text-white p-4 sm:p-6 lg:p-8">
            <div 
              className="absolute inset-0 z-0 opacity-20"
              style={{
                backgroundImage: 'radial-gradient(circle at top right, #4f46e5, transparent 50%), radial-gradient(circle at bottom left, #db2777, transparent 50%)',
              }}
            ></div>
            <main className="relative z-10 container mx-auto max-w-4xl flex flex-col items-center">
              <header className="text-center my-8 md:my-12">
                  <div className="inline-block bg-clip-text text-transparent bg-gradient-to-r from-pink-500 to-violet-500 mb-2">
                      <h1 className="text-4xl md:text-5xl font-bold">Piano Request Checker</h1>
                  </div>
                  <p className="text-lg text-gray-300 mt-2">ピアノ配信でリクエストする前に、弾ける曲かチェック！</p>
              </header>
              <section className="w-full">
                <SearchBar searchTerm={searchTerm} setSearchTerm={setSearchTerm} handleSearch={handleSearch} isLoading={isYamahaLoading} />
              </section>
              <section className="w-full mt-6 flex justify-center">
                  <ResultsDisplay error={error} playableListResult={playableListResult} hasSearched={hasSearched} searchTerm={submittedSearchTerm} isYamahaLoading={isYamahaLoading} yamahaApiError={yamahaApiError} yamahaApiResponse={yamahaApiResponse} />
              </section>
              <footer className="text-center mt-12 text-gray-500 text-sm">
                  <p>&copy; 2024 Piano Request Checker. For demonstration purposes only.</p>
              </footer>
            </main>
            <SettingsModal isOpen={isSettingsOpen} onClose={() => setIsSettingsOpen(false)} listInput={playableListInput} setListInput={setPlayableListInput} isLoggedIn={isLoggedIn} onLogin={handleLogin} onLogout={handleLogout} />
          </div>
        );
      };

      // --- Final Render ---
      const rootElement = document.getElementById('root');
      if (!rootElement) {
        throw new Error("Could not find root element to mount to");
      }
      const root = ReactDOM.createRoot(rootElement);
      root.render(
        <React.StrictMode>
          <App />
        </React.StrictMode>
      );
    </script>
  <script type="module" src="/index.tsx"></script>
</body>
</html>
